package main

import "fyne.io/fyne/v2"

var currentLang = "EN"

var i18n = map[string]map[string]string{
	"EN": {
		"lang":            "Language",
		"select_language": "Select language",
		"error":           "Error",
		"success":         "Success",

		// Login
		"enter_password":      "Enter a password...",
		"sign_in":             "Sign in",
		"pick_keys_file":      "Pick keys file",
		"no_file_selected":    "No file selected.",
		"file_too_short":      "The file is too short",
		"file_corrupted":      "The file is corrupted",
		"keys_loaded":         "Keys loaded successfully!",
		"wrong_password":      "Wrong password",
		"both_keyfiles_found": "Both center.bin and abc.bin are in the app folder. Please delete one and leave only one.",
		"no_keyfiles_found":   "Neither center.bin nor abc.bin found in the app folder.",
		"warning":             "Warning",
		"keys_expiry_warning": "Your keys expire in %d %s (by %s). Please update the keys in advance.",
		"keys_expired_error":  "Key validity expired on %s. Update the key file and restart the application.",

		// Main UI
		"hash_of_key":                      "Hash of Key",
		"encrypt":                          "Encrypt",
		"decrypt":                          "Decrypt",
		"need_keys_first":                  "Please load the encryption keys first",
		"encrypt_saved_ok":                 "File successfully encrypted and saved!",
		"decrypt_saved_ok":                 "The file has been successfully decrypted and saved!",
		"clear_log":                        "Clear log",
		"select_key_type":                  "Select key type",
		"copy":                             "Copy",
		"copied_to_clipboard":              "Copied to clipboard",
		"keys_left":                        "Keys left",
		"keys_left_inout":                  "In: %d | Out: %d",
		"encrypt_card_hint":                "Encrypt a file and save as .bin",
		"decrypt_card_hint":                "Decrypt a .bin file back to original",
		"keys_loaded_hash":                 "Keys loaded. Hash: %s",
		"open_error":                       "Open error: %v",
		"read_error":                       "Read error: %v",
		"iv_generation_error":              "IV generation error: %v",
		"header_write_error":               "Header write error: %v",
		"save_error":                       "Save error: %v",
		"write_error":                      "Write error: %v",
		"imit_read_error":                  "IMiT read error: %v",
		"file_info_imit_mismatch":          "File info IMIT mismatch",
		"unknown_key_type":                 "Unknown key type 0x%X",
		"decryption_key_not_available":     "Decryption key is not available",
		"invalid_file_no_iv":               "Invalid file: no IV",
		"invalid_file_not_enough_data":     "Invalid file: not enough data",
		"decrypt_error":                    "Decrypt error: %v",
		"mode_center":                      "Mode: Center",
		"mode_user":                        "Mode: User",
		"invalid_session_index":            "Invalid session index",
		"file_too_big":                     "The file exceeds the 2 GB limit",
		"encrypting":                       "Encrypting...",
		"decrypting":                       "Decrypting...",
		"encrypt_to":                       "Encrypt to",
		"key_type_session":                 "Session keys",
		"key_type_circle":                  "Circle keys",
		"user_n":                           "№%d",
		"keys_file_updated":                "Key file updated on disk",
		"keys_countdown":                   "%d %s until key rotation (%s)",
		"center_file_decrypt_on_recipient": "This file was encrypted in Center mode and must be decrypted by the recipient (user).",
		"unknown_sender":                   "Unknown sender: owner=%d (no such user in center.bin)",

		//mini-encrypt window
		"encrypt_choose_mode": "Choose what to encrypt",
		"one_file":            "One file",
		"several_files":       "Multiple files",
		"close":               "Close",

		// Change password
		"change_password":        "Change password",
		"new_password":           "New password",
		"confirm_password":       "Confirm password",
		"password_rules":         "Password must meet all rules below:",
		"rule_min_length":        "At least 10 characters",
		"rule_upper":             "At least one uppercase letter",
		"rule_lower":             "At least one lowercase letter",
		"rule_digit":             "At least one digit",
		"rule_special":           "At least one special character",
		"rule_match":             "Passwords match",
		"password_not_valid":     "Password does not meet the requirements",
		"passwords_mismatch":     "Passwords do not match",
		"password_changed_ok":    "Password has been changed",
		"please_change_password": "Default password detected. Please change it now.",
		"save":                   "Save",
		"cancel":                 "Cancel",

		//Multi encrypt
		"multiple_files":   "Multiple files",
		"add_file":         "Add file",
		"add_folder":       "Add folder",
		"remove":           "Remove",
		"clear":            "Clear",
		"selected":         "Selected",
		"size":             "Size",
		"nothing_selected": "Nothing selected",
	},
	"RU": {
		"lang":            "Язык",
		"select_language": "Выберите язык",
		"error":           "Ошибка",
		"success":         "Готово",

		// Login
		"enter_password":      "Введите пароль...",
		"sign_in":             "Войти",
		"pick_keys_file":      "Выберите файл ключей",
		"no_file_selected":    "Файл не выбран.",
		"file_too_short":      "Файл слишком короткий",
		"file_corrupted":      "Файл повреждён",
		"keys_loaded":         "Ключи успешно загружены!",
		"wrong_password":      "Пароль неверный",
		"both_keyfiles_found": "В папке с приложением найдены оба файла: center.bin и abc.bin. Удалите один и оставьте только один.",
		"no_keyfiles_found":   "В папке приложения не найден ни center.bin, ни abc.bin.",
		"warning":             "Внимание",
		"keys_expiry_warning": "До окончания срока действия ключей осталось %d %s (до %s). Пожалуйста, обновите ключи заранее.",
		"keys_expired_error":  "Срок действия ключей истёк %s. Обновите файл ключей и перезапустите приложение.",

		// Main UI
		"hash_of_key":                      "Хэш ключа",
		"encrypt":                          "Зашифровать",
		"decrypt":                          "Расшифровать",
		"need_keys_first":                  "Сначала загрузите ключи шифрования",
		"encrypt_saved_ok":                 "Файл успешно зашифрован и сохранён!",
		"decrypt_saved_ok":                 "Файл успешно расшифрован и сохранён!",
		"clear_log":                        "Очистить лог",
		"select_key_type":                  "Тип ключа",
		"copy":                             "Копировать",
		"copied_to_clipboard":              "Скопировано в буфер",
		"keys_left":                        "Осталось ключей",
		"keys_left_inout":                  "Входящих: %d | Исходящих: %d",
		"encrypt_card_hint":                "Зашифровать файл и сохранить как .bin",
		"decrypt_card_hint":                "Расшифровать .bin обратно в исходный",
		"keys_loaded_hash":                 "Ключи загружены. Хэш: %s",
		"open_error":                       "Ошибка открытия: %v",
		"read_error":                       "Ошибка чтения: %v",
		"iv_generation_error":              "Ошибка генерации IV: %v",
		"header_write_error":               "Ошибка записи заголовка: %v",
		"save_error":                       "Ошибка сохранения: %v",
		"write_error":                      "Ошибка записи: %v",
		"imit_read_error":                  "Ошибка чтения IMiT: %v",
		"file_info_imit_mismatch":          "Несовпадение IMIT информации файла",
		"unknown_key_type":                 "Неизвестный тип ключа 0x%X",
		"decryption_key_not_available":     "Ключ для расшифровки недоступен",
		"invalid_file_no_iv":               "Неверный файл: нет IV",
		"invalid_file_not_enough_data":     "Неверный файл: недостаточно данных",
		"decrypt_error":                    "Ошибка расшифровки: %v",
		"mode_center":                      "Режим: Центр",
		"mode_user":                        "Режим: Пользователя",
		"invalid_session_index":            "Неверный индекс сессионного ключа",
		"file_too_big":                     "Файл превышает лимит 2 ГБ",
		"encrypting":                       "Шифрование...",
		"decrypting":                       "Расшифрование...",
		"encrypt_to":                       "Зашифровать для",
		"key_type_session":                 "Сессионные ключи",
		"key_type_circle":                  "Циркулярные ключи",
		"user_n":                           "№%d",
		"keys_file_updated":                "Файл ключей обновлён на диске",
		"keys_countdown":                   "Осталось до смены ключей %d %s (%s)",
		"center_file_decrypt_on_recipient": "Этот файл зашифрован в режиме Центра и должен расшифровываться у адресата (пользователя).",
		"unknown_sender":                   "Неизвестный отправитель: owner=%d (нет такого пользователя в center.bin)",

		//mini-encrypt window
		"encrypt_choose_mode": "Выберите, что шифровать",
		"one_file":            "Один файл",
		"several_files":       "Несколько файлов",
		"close":               "Закрыть",

		// Change password
		"change_password":        "Смена пароля",
		"new_password":           "Новый пароль",
		"confirm_password":       "Подтверждение пароля",
		"password_rules":         "Пароль должен соответствовать всем правилам:",
		"rule_min_length":        "Не менее 10 символов",
		"rule_upper":             "Хотя бы одна заглавная буква",
		"rule_lower":             "Хотя бы одна строчная буква",
		"rule_digit":             "Хотя бы одна цифра",
		"rule_special":           "Хотя бы один спецсимвол",
		"rule_match":             "Пароли совпадают",
		"password_not_valid":     "Пароль не соответствует требованиям",
		"passwords_mismatch":     "Пароли не совпадают",
		"password_changed_ok":    "Пароль изменён",
		"please_change_password": "Обнаружен стандартный пароль. Пожалуйста, смените его.",
		"save":                   "Сохранить",
		"cancel":                 "Отмена",

		//Multi encrypt
		"multiple_files":   "Несколько файлов",
		"add_file":         "Добавить файл",
		"add_folder":       "Добавить папку",
		"remove":           "Удалить",
		"clear":            "Очистить",
		"selected":         "Выбрано",
		"size":             "Размер",
		"nothing_selected": "Ничего не выбрано",
	},
	"KZ": {
		"lang":            "Тіл",
		"select_language": "Тілді таңдаңыз",
		"error":           "Қате",
		"success":         "Сәтті",

		// Login
		"enter_password":      "Құпиясөзді енгізіңіз...",
		"sign_in":             "Кіру",
		"pick_keys_file":      "Кілт файлды таңдаңыз",
		"no_file_selected":    "Файл таңдалмады.",
		"file_too_short":      "Файл тым қысқа",
		"file_corrupted":      "Файл бүлінген",
		"keys_loaded":         "Кілттер сәтті жүктелді!",
		"both_keyfiles_found": "Папкада екі файл да табылды: center.bin және abc.bin. Біреуін жою керек, тек біреуін қалдырыңыз.",
		"no_keyfiles_found":   "Папкада center.bin да, abc.bin да табылмады.",
		"warning":             "Назар аударыңыз",
		"keys_expiry_warning": "Кілттердің әрекет ету мерзімінің аяқталуына %d %s қалды (%s дейін). Алдын ала кілттерді жаңартыңыз.",
		"keys_expired_error":  "Кілттердің әрекет ету мерзімі %s күні аяқталды. Кілт файлын жаңартып, қосымшаны қайта іске қосыңыз.",

		// Main UI
		"hash_of_key":                      "Кілттің хэші",
		"encrypt":                          "Шифрлау",
		"decrypt":                          "Дешифрлау",
		"need_keys_first":                  "Алдымен шифр кілттерін жүктеңіз",
		"encrypt_saved_ok":                 "Файл сәтті шифрленіп сақталды!",
		"decrypt_saved_ok":                 "Файл сәтті дешифрленіп сақталды!",
		"clear_log":                        "Логты тазарту",
		"select_key_type":                  "Кілт түрі",
		"wrong_password":                   "Құпиясөз дұрыс емес",
		"copy":                             "Көшіріп алу",
		"copied_to_clipboard":              "Алмасу буферіне көшірілді",
		"keys_left":                        "Қалған кілттер",
		"keys_left_inout":                  "Кіріс: %d | Шығыс: %d",
		"encrypt_card_hint":                "Файлды шифрлап .bin ретінде сақтау",
		"decrypt_card_hint":                ".bin файлын бастапқысына қайтару",
		"keys_loaded_hash":                 "Кілттер жүктелді. Хэш: %s",
		"open_error":                       "Ашу қатесі: %v",
		"read_error":                       "Оқу қатесі: %v",
		"iv_generation_error":              "IV генерация қатесі: %v",
		"header_write_error":               "Тақырып жазу қатесі: %v",
		"save_error":                       "Сақтау қатесі: %v",
		"write_error":                      "Жазу қатесі: %v",
		"imit_read_error":                  "IMiT оқу қатесі: %v",
		"file_info_imit_mismatch":          "Файл ақпаратының IMIT сәйкессіздігі",
		"unknown_key_type":                 "Белгісіз кілт түрі 0x%X",
		"decryption_key_not_available":     "Дешифрлеу кілті қолжетімсіз",
		"invalid_file_no_iv":               "Жарамсыз файл: IV жоқ",
		"invalid_file_not_enough_data":     "Жарамсыз файл: дерек жетіспейді",
		"decrypt_error":                    "Дешифрлеу қатесі: %v",
		"mode_center":                      "Орталық режимі:",
		"mode_user":                        "Пайдаланушы режимі:",
		"invalid_session_index":            "Сеанстық кілт индексі қате табылды",
		"file_too_big":                     "Файл 2 ГБ шектен асады",
		"encrypting":                       "Шифрлау...",
		"decrypting":                       "Дешифрлау...",
		"encrypt_to":                       "Кімге шифрлеу",
		"key_type_session":                 "Сеанстық кілттер",
		"key_type_circle":                  "Циркулярлық кілттер",
		"user_n":                           "№%d",
		"keys_file_updated":                "Кілттердің файлы дискіде жаңартылды",
		"keys_countdown":                   "Кілттерді ауыстыруға %d %s қалды (%s)",
		"center_file_decrypt_on_recipient": "Бұл файл Орталық режимінде шифрланған, оны тек алушы (пайдаланушы) жағы дешифрлеуі тиіс.",
		"unknown_sender":                   "Белгісіз жіберуші: owner=%d (center.bin ішінде мұндай пайдаланушы жоқ)",

		//mini-encrypt window
		"encrypt_choose_mode": "Нені шифрлаймыз?",
		"one_file":            "Бір файл",
		"several_files":       "Бірнеше файл",
		"close":               "Жабу",

		// Change password
		"change_password":        "Құпиясөзді өзгерту",
		"new_password":           "Жаңа құпиясөз",
		"confirm_password":       "Құпиясөзді растау",
		"password_rules":         "Құпиясөз келесі талаптарға сай болуы керек:",
		"rule_min_length":        "Кемі 10 таңба",
		"rule_upper":             "Кемі бір бас әріп",
		"rule_lower":             "Кемі бір кіші әріп",
		"rule_digit":             "Кемі бір сан",
		"rule_special":           "Кемі бір арнайы таңба",
		"rule_match":             "Құпиясөздер сәйкес",
		"password_not_valid":     "Құпиясөз талаптарға сай емес",
		"passwords_mismatch":     "Құпиясөздер сәйкес емес",
		"password_changed_ok":    "Құпиясөз өзгертілді",
		"please_change_password": "Бастапқы құпиясөз анықталды. Өтінеміз, оны өзгертіңіз.",
		"save":                   "Сақтау",
		"cancel":                 "Болдырмау",

		//Multi encrypt
		"multiple_files":   "Бірнеше файл",
		"add_file":         "Файл қосу",
		"add_folder":       "Папканы қосу",
		"remove":           "Өшіру",
		"clear":            "Тазарту",
		"selected":         "Таңдалған",
		"size":             "Өлшемі",
		"nothing_selected": "Ештеңе таңдалмады",
	},
}

func tr(key string) string {
	if m, ok := i18n[currentLang]; ok {
		if v, ok2 := m[key]; ok2 {
			return v
		}
	}
	return key
}

func setLang(app fyne.App, code string) {
	if _, ok := i18n[code]; !ok {
		code = "EN"
	}
	currentLang = code
	app.Preferences().SetString("lang", code)
}
